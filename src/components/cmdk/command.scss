/////////////////////////////
// CMDK COMPONENT STYLES
// Uses only CSS variables from Payload runtime
/////////////////////////////

@layer payload {
  // Main Command Container
  .command {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: auto; // Adjusts based on content
    overflow: hidden;
    border-radius: var(--style-radius-m);
    background: var(--theme-elevation-0);
    color: var(--theme-text);
    border: 1px solid var(--theme-border-color);
    box-shadow: 0 4px 8px -3px rgba(0, 0, 0, 0.1);
  }

  // Command Input Wrapper
  .command__input-wrapper {
    display: flex;
    align-items: center;
    gap: calc(var(--base) * 0.5);
    height: calc(var(--base) * 2);
    padding: 0 calc(var(--base) * 0.75);
    border-bottom: 1px solid var(--theme-elevation-150);

    svg {
      width: calc(var(--base) * 0.8);
      height: calc(var(--base) * 0.8);
      flex-shrink: 0;
      opacity: 0.5;
      color: var(--theme-elevation-500);
    }
  }

  // Command Input
  .command__input {
    display: flex;
    width: 100%;
    height: calc(var(--base) * 1.8);
    padding: calc(var(--base) * 0.5) 0;
    font-family: var(--font-body);
    font-size: 1.077rem; // ~14px
    background: transparent;
    border: none;
    outline: none;
    color: var(--theme-text);

    &::placeholder {
      color: var(--theme-elevation-400);
      font-weight: normal;
    }

    &:disabled {
      cursor: not-allowed;
      opacity: 0.5;
    }
  }

  // Command List
  .command__list {
    max-height: 300px;
    overflow-x: hidden;
    overflow-y: auto;
    scroll-padding: calc(var(--base) * 0.25);
    padding: calc(var(--base) * 0.25);

    &::-webkit-scrollbar {
      width: 8px;
    }

    &::-webkit-scrollbar-track {
      background: var(--theme-elevation-50);
      border-radius: var(--style-radius-s);
    }

    &::-webkit-scrollbar-thumb {
      background: var(--theme-elevation-250);
      border-radius: var(--style-radius-s);

      &:hover {
        background: var(--theme-elevation-350);
      }
    }
  }

  // Command Empty State
  .command__empty {
    padding: calc(var(--base) * 1.5) 0;
    text-align: center;
    font-size: 1rem; // ~13px
    color: var(--theme-elevation-500);
  }

  // Command Group
  .command__group {
    overflow: hidden;
    padding: calc(var(--base) * 0.25);
    color: var(--theme-text);

    // Group Heading
    [cmdk-group-heading] {
      padding: calc(var(--base) * 0.4) calc(var(--base) * 0.5);
      font-size: 0.846rem; // ~11px
      font-weight: 500;
      color: var(--theme-elevation-500);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      user-select: none;
    }

    // &:not(:first-child) {
    //   margin-top: calc(var(--base) * 0.25);
    // }
  }

  // Command Separator
  .command__separator {
    height: 1px;
    margin: calc(var(--base) * 0.25) calc(var(--base) * -0.25);
    background: var(--theme-elevation-150);
  }

  // Command Item
  .command__item {
    position: relative;
    display: flex;
    align-items: center;
    gap: calc(var(--base) * 0.5);
    padding: calc(var(--base) * 0.4) calc(var(--base) * 0.5);
    font-size: 1rem; // ~13px (base Payload size)
    border-radius: var(--style-radius-s);
    cursor: default;
    user-select: none;
    outline: none;
    transition: all 100ms cubic-bezier(0, 0.2, 0.2, 1);

    svg {
      pointer-events: none;
      flex-shrink: 0;
      width: calc(var(--base) * 0.8);
      height: calc(var(--base) * 0.8);

      &:not([class*='text-']) {
        color: var(--theme-elevation-500);
      }
    }

    // Selected/Hover state
    &[data-selected='true'] {
      background: var(--theme-success-100);
      color: var(--theme-success-800);

      svg:not([class*='text-']) {
        color: var(--theme-success-700);
      }
    }

    // Disabled state
    &[data-disabled='true'] {
      pointer-events: none;
      opacity: 0.5;
    }

    // Hover state (when not using keyboard navigation)
    &:hover:not([data-disabled='true']) {
      background: var(--theme-elevation-100);
    }
  }

  // Command Shortcut
  .command__shortcut {
    margin-left: auto;
    font-size: 0.846rem; // ~11px
    font-family: var(--font-mono);
    letter-spacing: 0.5px;
    color: var(--theme-elevation-500);
    opacity: 0.8;
  }

  // Dark theme adjustments
  html[data-theme='dark'] {
    .command {
      background: var(--theme-elevation-50);
      border-color: var(--theme-elevation-200);
    }

    .command__input-wrapper {
      border-bottom-color: var(--theme-elevation-200);
    }

    .command__item {
      &[data-selected='true'] {
        background: var(--theme-success-200);
        color: var(--theme-success-900);

        svg:not([class*='text-']) {
          color: var(--theme-success-800);
        }
      }

      &:hover:not([data-disabled='true']) {
        background: var(--theme-elevation-150);
      }
    }
  }

  // Responsive adjustments
  @media (max-width: 768px) {
    .command__list {
      max-height: 250px;
    }

    .command__input-wrapper {
      padding: 0 calc(var(--base) * 0.5);
    }

    .command__item {
      padding: calc(var(--base) * 0.35) calc(var(--base) * 0.4);
      font-size: 0.923rem; // ~12px on mobile
    }

    .command__group [cmdk-group-heading] {
      padding: calc(var(--base) * 0.35) calc(var(--base) * 0.4);
    }
  }
}